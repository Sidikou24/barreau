<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Barreau du Niger{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-background text-foreground">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-sidebar border-r border-sidebar-border">
            <!-- Header -->
            <div class="border-b border-sidebar-border p-4">
                <div class="flex items-center gap-3">
                    <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground">
                        <i data-lucide="scale" class="h-4 w-4"></i>
                    </div>
                    <div>
                        <h2 class="text-sm font-semibold text-sidebar-foreground">Barreau du Niger</h2>
                        <p class="text-xs text-muted-foreground">Système de gestion</p>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="p-4">
                <div class="space-y-1">
                    <p class="text-xs font-medium text-muted-foreground mb-2">Navigation</p>
                    {% if current_user.is_authenticated and current_user.role == 'batonnier' %}
                        <a href="{{ url_for('batonnier.dashboard') }}" class="sidebar-menu-item">
                            <i data-lucide="bar-chart-3" class="h-4 w-4 mr-3"></i> Tableau de bord
                        </a>
                        <a href="{{ url_for('batonnier.utilisateurs') }}" class="sidebar-menu-item">
                            <i data-lucide="users" class="h-4 w-4 mr-3"></i> Gestion des utilisateurs
                        </a>
                    {% elif current_user.is_authenticated and current_user.role == 'assistant_administratif' %}
                        <a href="{{ url_for('assistant_admin.dashboard') }}" class="sidebar-menu-item">
                            <i data-lucide="bar-chart-3" class="h-4 w-4 mr-3"></i> Tableau de bord
                        </a>
                        <a href="{{ url_for('assistant_admin.dashboard') }}#actes" class="sidebar-menu-item">
                            <i data-lucide="file-text" class="h-4 w-4 mr-3"></i> Actes d’avocats
                        </a>
                        <a href="{{ url_for('assistant_admin.dashboard') }}#assistance-juridique" class="sidebar-menu-item">
                            <i data-lucide="life-buoy" class="h-4 w-4 mr-3"></i> Assistance juridique
                        </a>
                                            {% else %}
                        <a href="{{ url_for('auth.change_password') }}" class="sidebar-menu-item">
                            <i data-lucide="key" class="h-4 w-4 mr-3"></i> Mon mot de passe
                        </a>
                    {% endif %}
                </div>
            </div>

            <!-- Footer -->
            <div class="absolute bottom-0 w-64 border-t border-sidebar-border p-4">
                <div class="flex items-center gap-3 mb-3">
                    <div class="avatar h-8 w-8">
                        <span>{{ current_user.nom[0] if current_user.is_authenticated and current_user.nom else 'U' }}</span>
                    </div>
                    <div class="flex-1 text-left text-sm">
                        <div class="font-medium text-sidebar-foreground">{{ current_user.nom }} {{ current_user.prenom }}</div>
                        <div class="text-xs text-muted-foreground">
                            {% if current_user.role == 'assistant_administratif' %}Assistant Administratif
                            {% elif current_user.role == 'secretaire' %}Secrétaire de l'Ordre
                            {% elif current_user.role == 'tresorier' %}Trésorière
                            {% elif current_user.role == 'batonnier' %}Bâtonnier
                            {% elif current_user.role == 'avocat' %}Avocat
                            {% else %}{{ current_user.role|capitalize }}{% endif %}
                        </div>
                    </div>
                </div>
                <a href="{{ url_for('auth.logout') }}" class="btn btn-outline w-full justify-start gap-2">
                    <i data-lucide="log-out" class="h-4 w-4"></i> Déconnexion
                </a>
            </div>
        </div>

        <!-- Contenu principal -->
        <div class="flex-1 p-6">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-4 space-y-2">
                        {% for category, message in messages %}
                            <div class="p-3 rounded-md {% if category == 'success' %}bg-green-100 text-green-800{% elif category == 'danger' %}bg-red-100 text-red-800{% elif category == 'warning' %}bg-yellow-100 text-yellow-800{% else %}bg-blue-100 text-blue-800{% endif %}">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            {% block content %}{% endblock %}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });
    </script>
</body>
</html>
